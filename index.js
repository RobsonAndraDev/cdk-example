"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const cdk = require('@aws-cdk/core');
const aws_ec2_1 = require("@aws-cdk/aws-ec2");
const ecs_cluster_handler_1 = require("./ecs-cluster-handler");
const ecs_service_handler_1 = require("./ecs-service-handler");
const elb_handler_1 = require("./elb-handler");
const app = new cdk.App();
const stack = new cdk.Stack(app, 'aws-ecs-integ-ecs');
// so pra nao criar uma classe VPC
const vpc = new aws_ec2_1.Vpc(stack, 'Vpc', { maxAzs: 2 });
const cluster = ecs_cluster_handler_1.EcsClusterHandler.createCluster(stack, vpc);
const serviceHandler = new ecs_service_handler_1.EcsServiceHandler(stack);
const taskDefinition = serviceHandler.createTaskDefinition();
const service = serviceHandler.createService(cluster, taskDefinition);
const elbHandler = new elb_handler_1.ElbHandler();
const elb = elbHandler.createElb(stack, vpc);
elbHandler.createListener(elb, service);
new cdk.CfnOutput(stack, 'LoadBalancerDNS', { value: elb.loadBalancerDnsName, });
app.synth();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU0sR0FBRyxHQUFHLE9BQU8sQ0FBQyxlQUFlLENBQUMsQ0FBQztBQUNyQyw4Q0FBdUM7QUFDdkMsK0RBQTBEO0FBQzFELCtEQUEwRDtBQUMxRCwrQ0FBMkM7QUFFM0MsTUFBTSxHQUFHLEdBQUcsSUFBSSxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUM7QUFDMUIsTUFBTSxLQUFLLEdBQUcsSUFBSSxHQUFHLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSxtQkFBbUIsQ0FBQyxDQUFDO0FBRXRELGtDQUFrQztBQUNsQyxNQUFNLEdBQUcsR0FBRyxJQUFJLGFBQUcsQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFLEVBQUUsTUFBTSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7QUFFakQsTUFBTSxPQUFPLEdBQUcsdUNBQWlCLENBQUMsYUFBYSxDQUFDLEtBQUssRUFBRSxHQUFHLENBQUMsQ0FBQztBQUU1RCxNQUFNLGNBQWMsR0FBRyxJQUFJLHVDQUFpQixDQUFDLEtBQUssQ0FBQyxDQUFDO0FBQ3BELE1BQU0sY0FBYyxHQUFHLGNBQWMsQ0FBQyxvQkFBb0IsRUFBRSxDQUFDO0FBQzdELE1BQU0sT0FBTyxHQUFHLGNBQWMsQ0FBQyxhQUFhLENBQUMsT0FBTyxFQUFFLGNBQWMsQ0FBQyxDQUFDO0FBRXRFLE1BQU0sVUFBVSxHQUFHLElBQUksd0JBQVUsRUFBRSxDQUFDO0FBQ3BDLE1BQU0sR0FBRyxHQUFHLFVBQVUsQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0FBQzdDLFVBQVUsQ0FBQyxjQUFjLENBQUMsR0FBRyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBRXhDLElBQUksR0FBRyxDQUFDLFNBQVMsQ0FBQyxLQUFLLEVBQUUsaUJBQWlCLEVBQUUsRUFBRSxLQUFLLEVBQUUsR0FBRyxDQUFDLG1CQUFtQixHQUFHLENBQUMsQ0FBQztBQUVqRixHQUFHLENBQUMsS0FBSyxFQUFFLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBjZGsgPSByZXF1aXJlKCdAYXdzLWNkay9jb3JlJyk7XG5pbXBvcnQgeyBWcGMgfSBmcm9tIFwiQGF3cy1jZGsvYXdzLWVjMlwiO1xuaW1wb3J0IHsgRWNzQ2x1c3RlckhhbmRsZXIgfSBmcm9tIFwiLi9lY3MtY2x1c3Rlci1oYW5kbGVyXCI7XG5pbXBvcnQgeyBFY3NTZXJ2aWNlSGFuZGxlciB9IGZyb20gXCIuL2Vjcy1zZXJ2aWNlLWhhbmRsZXJcIjtcbmltcG9ydCB7IEVsYkhhbmRsZXIgfSBmcm9tIFwiLi9lbGItaGFuZGxlclwiO1xuXG5jb25zdCBhcHAgPSBuZXcgY2RrLkFwcCgpO1xuY29uc3Qgc3RhY2sgPSBuZXcgY2RrLlN0YWNrKGFwcCwgJ2F3cy1lY3MtaW50ZWctZWNzJyk7XG5cbi8vIHNvIHByYSBuYW8gY3JpYXIgdW1hIGNsYXNzZSBWUENcbmNvbnN0IHZwYyA9IG5ldyBWcGMoc3RhY2ssICdWcGMnLCB7IG1heEF6czogMiB9KTsgXG5cbmNvbnN0IGNsdXN0ZXIgPSBFY3NDbHVzdGVySGFuZGxlci5jcmVhdGVDbHVzdGVyKHN0YWNrLCB2cGMpO1xuXG5jb25zdCBzZXJ2aWNlSGFuZGxlciA9IG5ldyBFY3NTZXJ2aWNlSGFuZGxlcihzdGFjayk7XG5jb25zdCB0YXNrRGVmaW5pdGlvbiA9IHNlcnZpY2VIYW5kbGVyLmNyZWF0ZVRhc2tEZWZpbml0aW9uKCk7XG5jb25zdCBzZXJ2aWNlID0gc2VydmljZUhhbmRsZXIuY3JlYXRlU2VydmljZShjbHVzdGVyLCB0YXNrRGVmaW5pdGlvbik7XG5cbmNvbnN0IGVsYkhhbmRsZXIgPSBuZXcgRWxiSGFuZGxlcigpO1xuY29uc3QgZWxiID0gZWxiSGFuZGxlci5jcmVhdGVFbGIoc3RhY2ssIHZwYyk7XG5lbGJIYW5kbGVyLmNyZWF0ZUxpc3RlbmVyKGVsYiwgc2VydmljZSk7XG5cbm5ldyBjZGsuQ2ZuT3V0cHV0KHN0YWNrLCAnTG9hZEJhbGFuY2VyRE5TJywgeyB2YWx1ZTogZWxiLmxvYWRCYWxhbmNlckRuc05hbWUsIH0pO1xuXG5hcHAuc3ludGgoKTsiXX0=